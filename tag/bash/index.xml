<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Bash | xin iDEA iNNATA</title>
    <link>https://xinii.cf/tag/bash/</link>
      <atom:link href="https://xinii.cf/tag/bash/index.xml" rel="self" type="application/rss+xml" />
    <description>Bash</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>ja-jp</language><copyright>© 2020 xin iDEA iNNATA</copyright><lastBuildDate>Tue, 30 Jun 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>https://xinii.cf/images/icon_huc6d37f8d5848c4cf0bbdc638499793df_110525_512x512_fill_lanczos_center_2.png</url>
      <title>Bash</title>
      <link>https://xinii.cf/tag/bash/</link>
    </image>
    
    <item>
      <title>A reasonable configuration tool for your unified working environment</title>
      <link>https://xinii.cf/project/xinconfig/</link>
      <pubDate>Tue, 30 Jun 2020 00:00:00 +0000</pubDate>
      <guid>https://xinii.cf/project/xinconfig/</guid>
      <description></description>
    </item>
    
    <item>
      <title>僕のシェル移行記録</title>
      <link>https://xinii.cf/post/my-shell-migration-record/</link>
      <pubDate>Fri, 03 May 2019 00:00:00 +0000</pubDate>
      <guid>https://xinii.cf/post/my-shell-migration-record/</guid>
      <description>
&lt;p&gt;
&lt;h2&gt;目次&lt;/h2&gt;
&lt;nav id=&#34;TableOfContents&#34;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#headline-1&#34;&gt;bashからzshに&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#配置zsh-shell&#34;&gt;配置zsh shell&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#从zsh到fish&#34;&gt;zshからfishに&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;#fish-shell的安装以及默认shell的切换&#34;&gt;fish shell的安装以及默认shell的切换&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#fish的配置&#34;&gt;fish的配置&lt;/a&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;#在fish-shell下使用python时的常见问题&#34;&gt;在fish shell下使用python时的常见问题&lt;/a&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/nav&gt;

&lt;/p&gt;
&lt;h2 id=&#34;headline-1&#34;&gt;
bashからzshに
&lt;/h2&gt;
&lt;p&gt;
虽然我使用zsh shell两周后就换到fish shell了（关于fish
shell下面有专门介绍）， 但这并不否认zsh shell仍然是个很好的shell。
你可以通过下面的方式从任意的shell切换至zsh shell。
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
安装zsh时通过下面的指令：
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  brew install zsh &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;MacOS&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;
  apt install zsh &lt;span style=&#34;color:#f92672&#34;&gt;(&lt;/span&gt;Ubuntu / Linux Mint&lt;span style=&#34;color:#f92672&#34;&gt;)&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
如果你想要知道现在系统裡已经安装好的shell，输入下面的指令：
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  cat /etc/shells&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
如何将zsh作为你默认的shell呢？，输入下面的指令：
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  chsh -s /usr/local/bin/zsh&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
关于配置文件的读取错误
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
shell脚本解释出错时可以查看一下当前所使用的=sh=路径，
比如有可能是=sh=指向了=dash=导致出错。 通过下面的语句查看。
&lt;/p&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  ls -l &lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;which sh&lt;span style=&#34;color:#e6db74&#34;&gt;`&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
脚本解释器在语法上的不同点
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
从传统的bash等shell换到zsh时会发现集合的第一个元素的索引是从1开始的，
如果希望从0开始，在配置文件中配置下面语句即可。
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
Fix array index for zsh:
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  &lt;span style=&#34;color:#66d9ef&#34;&gt;if&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;[&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt;$ZSH_NAME&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;zsh&amp;#34;&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;]&lt;/span&gt;;&lt;span style=&#34;color:#66d9ef&#34;&gt;then&lt;/span&gt;
      setopt localoptions ksharrays
  &lt;span style=&#34;color:#66d9ef&#34;&gt;fi&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;配置zsh-shell&#34;&gt;
配置zsh shell
&lt;/h3&gt;
&lt;p&gt;
与bash shell的=.bashrc=类似，=zsh=的配置也需要一个配置文件，
这个文件是在用户目录下的=.zshrc=文件，点击
&lt;a href=&#34;https://github.com/xinii/xinconfig/blob/master/profile/core/zsh.sh&#34;&gt;这里&lt;/a&gt;
打开我上传到=Github=的配置文件下载使用。
&lt;/p&gt;
&lt;h2 id=&#34;从zsh到fish&#34;&gt;
zshからfishに
&lt;/h2&gt;
&lt;p&gt;
使用zsh shell之后大概两週我就换到fish shell了，
这不是因为zsh不好，而是fish天然的完成度和易用性吸引了我，
转移到fish环境后，有关shell折腾算是告一段落，以下对该过程纪录。
&lt;/p&gt;
&lt;h3 id=&#34;fish-shell的安装以及默认shell的切换&#34;&gt;
fish shell的安装以及默认shell的切换
&lt;/h3&gt;
&lt;p&gt;
这个上面提到过，这裡具体针对不同的操作系统所需要执行的指令进行介绍。
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
MacOS:
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  brew install fish&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
Ubuntu/Linux Mint:
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  apt install fish&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
OpenSUSE:
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  sudo zypper install fish&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
如果需要=root=权限，例如你是运行在Windows下的OpenSUSE环境，
则默认需要=root=权限，则前面加=sudo=。
通过下面的语句查看当前系统所使用的shell：
&lt;/p&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  cat /etc/shells&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
如果显示你的fish shell在=/usr/bin/fish=，
那麽执行下面的语句切换其为默认shell（权限不足则补充=sudo=）：
&lt;/p&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  chsh -s /usr/bin/fish&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;
现在重新打开一个终端会话会发现默认shell已经切换到fish了。 如果打开fish
shell后马上报很多关于hostname的错，
也就是说当前环境缺少一个叫做hostname的包，
那麽使用你所使用的发行版的包管理器安装=hostname=，
例如在OpenSUSE下使用：
&lt;/p&gt;
&lt;div class=&#34;src src-sh&#34;&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-sh&#34; data-lang=&#34;sh&#34;&gt;  sudo zypper install hostname&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h3 id=&#34;fish的配置&#34;&gt;
fish的配置
&lt;/h3&gt;
&lt;p&gt;
我写好的配置上传在了Github，点击
&lt;a href=&#34;https://github.com/xinii/xinconfig/tree/master/profile/fish&#34;&gt;这里&lt;/a&gt;
查看我的配置。
&lt;/p&gt;
&lt;h3 id=&#34;在fish-shell下使用python时的常见问题&#34;&gt;
在fish shell下使用python时的常见问题
&lt;/h3&gt;
&lt;p&gt;
目前我遇到的比较需要注意的问题有下面两点：
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
关于tmux
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
tmux在后台存在session的时候， 即使更新=PYTHONPATH=环境变量也不会生效，
此时需要关闭tmux的所有进程，更新才会生效。
除fish以外其他shell环境应该也会遇到， 我是在fish首次出现，留作纪录。
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;
关于PYTHONPATH
&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;
fish
shell中定义环境变量的方式为 &lt;code class=&#34;verbatim&#34;&gt;set &amp;lt;variable_name&amp;gt; &amp;lt;parameter_1&amp;gt; &amp;lt;parameter_2&amp;gt;&lt;/code&gt;
这种方式有很大的优越性而且非常方便， 然而对于=PYTHONPATH=，
则=set PYTHONPATH &amp;lt;parameter_1&amp;gt;:&amp;lt;parameter_2&amp;gt;=的方式更具有通用性。
原因为，经过测试在MacOS下两种方式均可正常使用， 但在运行在Jetson
Nano上的Ubuntu下测试时，只有第二种方式可用。
具体原因尚未明确，有可能时操作系统不同的原因，
也可能是python版本不同造成的
（比如版本号相同，但处理器架构不同造成了编译方式的差异导致该问题）。
&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
