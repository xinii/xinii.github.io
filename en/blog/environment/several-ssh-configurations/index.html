<!doctype html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<title>Several SSH configurations - xin blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1">


  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png?v=0.16">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png?v=0.16">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png?v=0.16">
  <link rel="manifest" href="/favicon/site.webmanifest?v=0.16">
  
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg?v=0.16" color="#ffffff">
    <link rel="shortcut icon" href="/favicon/favicon.ico?v=0.16">
    <meta name="msapplication-config" content="/favicon/browserconfig.xml?v=0.16">
  
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="theme-color" content="#ffffff">

<meta name="generator" content="Hugo 0.67.0" /><meta itemprop="name" content="Several SSH configurations">
<meta itemprop="description" content="Very headache for the ssh interruption phenomenon? Want to set an ssh daemon on android by termux? Take a look at this article.">
<meta itemprop="datePublished" content="2020-06-03T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-06-03T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="251">



<meta itemprop="keywords" content="sshd,android,termux,keygen,environment,ssh," /><meta property="og:title" content="Several SSH configurations" />
<meta property="og:description" content="Very headache for the ssh interruption phenomenon? Want to set an ssh daemon on android by termux? Take a look at this article." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://xinii.github.io/en/blog/environment/several-ssh-configurations/" />
<meta property="article:published_time" content="2020-06-03T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-03T00:00:00+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Several SSH configurations"/>
<meta name="twitter:description" content="Very headache for the ssh interruption phenomenon? Want to set an ssh daemon on android by termux? Take a look at this article."/>
<meta name="twitter:site" content="@xintxt"/>
<link rel="stylesheet" href="/css/bundle.min.759e3848ea529eef056dab665b241e2af569e601ab80f68f8d4a4d002a155dd4.css" integrity="sha256-dZ44SOpSnu8FbatmWyQeKvVp5gGrgPaPjUpNACoVXdQ="><link rel="stylesheet" href="/css/add-on.css">
</head>

  <body>
    

<header id="site-header">
  <nav id="site-nav">
    <h1 class="nav-title">
      <a href="/en/" class="nav">
        
          
            Blog
          
        
      </a>
    </h1>
    <menu id="site-nav-menu" class="flyout-menu menu">
      
        
          
          
            <a href="/en/" class="nav link"><i class='fa fa-home'></i> Home</a>
          
        
      
        
          
          
            <a href="/en/about/" class="nav link"><i class='far fa-id-card'></i> About</a>
          
        
      
        
          
          
            <a href="/en/blog/" class="nav link"><i class='far fa-newspaper'></i> Blog</a>
          
        
      
        
          
          
            <a href="/en/categories/" class="nav link"><i class='fas fa-sitemap'></i> Categories</a>
          
        
      
        
          
          
            <a href="/en/tags/" class="nav link"><i class='fas fa-tags'></i> Tags</a>
          
        
      
        
          
          
            <a href="/en/contact/" class="nav link"><i class='far fa-envelope'></i> Contact</a>
          
        
      
      <a href="#share-menu" class="nav share-toggle"><i class="fas fa-share-alt">&nbsp;</i>Share</a>
      <a href="#search-input" class="nav search-toggle"><i class="fas fa-search">&nbsp;</i>Search</a>
    </menu>
    <a href="#search-input" class="nav search-toggle"><i class="fas fa-search fa-2x">&nbsp;</i></a>
    <a href="#share-menu" class="nav share-toggle"><i class="fas fa-share-alt fa-2x">&nbsp;</i></a>
    <a href="#lang-menu" class="nav lang-toggle" lang="en">en</a>
    <a href="#site-nav" class="nav nav-toggle"><i class="fas fa-bars fa-2x"></i></a>
  </nav>
  <menu id="search" class="menu"><input id="search-input" class="search-input menu"></input><div id="search-results" class="search-results menu"></div></menu>
  <menu id="lang-menu" class="flyout-menu menu">
  <a href="#" lang="en" class="nav link active">English (en)</a>
  
    
      
    
      
        <a href="/ja" lang="ja" class="nav no-lang link">日本語 (ja)</a>
      
    
      
        <a href="/zh-cn" lang="zh-cn" class="nav no-lang link">简体中文 (zh-cn)</a>
      
    
  
</menu>

  
    <menu id="share-menu" class="flyout-menu menu">
      <h1>Share Post</h1>
      




  
    
    <a href="//twitter.com/share?text=Several%20SSH%20configurations&amp;url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <i class="fab fa-facebook"></i><p>&nbsp;Facebook</p>
        </a>
  

  
    <a href="//www.reddit.com/submit?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;title=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn reddit">
          <i class="fab fa-reddit-alien"></i><p>&nbsp;Reddit</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;title=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;description=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn pinterest">
          <i class="fab fa-pinterest-p"></i><p>&nbsp;Pinterest</p>
        </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by Xin%20Li&amp;body=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


    </menu>
  
</header>

    <div id="wrapper">
      <section id="site-intro" >
  <a href="/en/"><img src="https://xinii.github.io/img/main/logo.jpg" class="circle" width="72px" alt="xin blog" /></a>
  <header>
    <h1>xin blog</h1>
  </header>
  <main>
    <p>Wellcome to xin blog!</p>
  </main>
  
    <footer>
      <ul class="socnet-icons">
        

        <li><a href="//github.com/xinii" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/xinii" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




<li><a href="//facebook.com/xintxt" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>






<li><a href="weixin://contacts/profile/xin099" target="_blank" rel="noopener" title="WeChat" class="fab fa-weixin"></a></li>
<li><a href="//wpa.qq.com/msgrd?v=3&amp;uin=78809709&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener" title="QQ" class="fab fa-qq"></a></li>


<li><a href="//twitter.com/xintxt" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>

<li><a href="skype:xintxt?userinfo" target="_blank" rel="noopener" title="Skype" class="fab fa-skype"></a></li>









<li><a href="mailto:xinii@msn.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
    </footer>
  
</section>

      <main id="site-main">
        
  <article class="post">
    <header>
  <div class="title">
    
      <h2><a href="/en/blog/environment/several-ssh-configurations/">Several SSH configurations</a></h2>
    
    
      <p>Very headache for the ssh interruption phenomenon? Want to set an ssh daemon on android by termux? Take a look at this article.</p>
    
  </div>
  <div class="meta">
    <time class="published" datetime="2020-06-03 00:00:00 &#43;0000 UTC">
      June 3, 2020
    </time>
    <span class="author">Xin Li</span>
    
      <p>2 minute read</p>
    
  </div>
</header>

    <section id="socnet-share">
      




  
    
    <a href="//twitter.com/share?text=Several%20SSH%20configurations&amp;url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" rel="noopener" class="nav share-btn twitter">
        <i class="fab fa-twitter"></i><p>&nbsp;Twitter</p>
      </a>
  

  
      <a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" rel="noopener" class="nav share-btn facebook">
        <i class="fab fa-facebook"></i><p>&nbsp;Facebook</p>
        </a>
  

  
    <a href="//www.reddit.com/submit?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;title=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn reddit">
          <i class="fab fa-reddit-alien"></i><p>&nbsp;Reddit</p>
        </a>
  

  
        <a href="//www.linkedin.com/shareArticle?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;title=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn linkedin">
            <i class="fab fa-linkedin"></i><p>&nbsp;LinkedIn</p>
          </a>
  

  
        <a href="//www.pinterest.com/pin/create/button/?url=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f&amp;description=Several%20SSH%20configurations" target="_blank" rel="noopener" class="nav share-btn pinterest">
          <i class="fab fa-pinterest-p"></i><p>&nbsp;Pinterest</p>
        </a>
  

  
        <a href="mailto:?subject=Check%20out%20this%20post%20by Xin%20Li&amp;body=https%3a%2f%2fxinii.github.io%2fen%2fblog%2fenvironment%2fseveral-ssh-configurations%2f" target="_blank" class="nav share-btn email" data-proofer-ignore>
          <i class="fas fa-envelope"></i><p>&nbsp;Email</p>
        </a>
  


    </section>
    

    <div class="content">
      <h2 id="ssh-interruption-phenomenon">SSH interruption phenomenon</h2>
<ul>
<li>When logging in to a remote server with ssh, <code>Write failed: Broken pipe</code> may be displayed and the connection may be broken.</li>
<li>It is necessary to change the ssh setting on the client side or the server side, because ssh is automatically disconnected by a timeout if it is not operated for a while.</li>
</ul>
<h4 id="remedy">Remedy</h4>
<ul>
<li>Deal on the client side</li>
</ul>
<p>Describe the following contents in <code>/etc/ssh/ssh_config</code> or <code>~/.ssh/config</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">ServerAliveInterval <span style="color:#ae81ff">15</span>
ServerAliveCountMax <span style="color:#ae81ff">10</span>
</code></pre></div><p>With this setting, 10 times response confirmation will send to the server every 15 seconds,
and if there is still no response, it times out.</p>
<ul>
<li>Deal on the server side</li>
</ul>
<p>Describe the following contents in <code>/etc/ssh/sshd_config</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">ClientAliveInterval <span style="color:#ae81ff">30</span>
ClientAliveCountMax <span style="color:#ae81ff">5</span>
</code></pre></div><p>With this setting, 5 times response confirmation will send to the client every 30 seconds,
and if there is still no response, it times out.</p>
<h4 id="one-more-thing">One more thing</h4>
<p>It is recommended to use tools such as tmux or screen,
so that even if the connection is lost halfway,
you can log in to the remote server again and attach the previous session.</p>
<h2 id="ssh-daemon-on-android-by-termux">SSH daemon on android by termux</h2>
<h4 id="installation">Installation</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">apt install openssh
</code></pre></div><h4 id="setting-the-key">Setting the key</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">ssh-keygen
cat ~/.ssh/id_rsa.pub &gt; ~/.ssh/authorized_keys
chmod <span style="color:#ae81ff">600</span> ~/.ssh/authorized_keys
chmod <span style="color:#ae81ff">700</span> ~/.ssh
</code></pre></div><h4 id="start-daemon-in-debug-mode">Start daemon in debug mode</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sshd -d
</code></pre></div><h4 id="start-daemon">Start daemon</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">sshd
</code></pre></div><h4 id="login-on-the-pc-side">Login on the PC side</h4>
<p>Set the private key <code>~/.ssh/id_rsa</code> generated on the android side in the SSH client of the PC side,
and connect to the server on android with specifying IP and port <code>8022</code> and without a username.</p>

    </div>
    <footer>
      <ul class="stats">
  <li class="categories">
    <ul>
    
      
        
          <li><a class="article-terms-link" href="/en/categories/environment/">environment</a></li>
        
          <li><a class="article-terms-link" href="/en/categories/ssh/">ssh</a></li>
        
      
    
    </ul>
  </li>
  <li class="tags">
    <ul>
    
      
        
          <li><a class="article-terms-link" href="/en/tags/sshd/">sshd</a></li>
        
          <li><a class="article-terms-link" href="/en/tags/android/">android</a></li>
        
          <li><a class="article-terms-link" href="/en/tags/termux/">termux</a></li>
        
          <li><a class="article-terms-link" href="/en/tags/keygen/">keygen</a></li>
        
          <li><a class="article-terms-link" href="/en/tags/environment/">environment</a></li>
        
          <li><a class="article-terms-link" href="/en/tags/ssh/">ssh</a></li>
        
      
    
    </ul>
  </li>
</ul>

    </footer>
  </article>
  
  <article class="post">
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "xinii" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
  </article>




  <div class="pagination">
  
  
    <a href="/en/blog/environment/add-apt-repository-for-fish-and-emacs/" class="button"><div class="next"><div>Add apt repository for fish and emacs</div></div></a>
  
</div>


      </main>
      <section id="site-sidebar">
  
    <section id="recent-posts">
      <header>
        <h1>Recent posts</h1>
      </header>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h2><a href="/en/blog/installation/some-installations-for-windows-10/">Some works after Windows 10 clean installation</a></h2>
          <time class="published" datetime="">June 4, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h2><a href="/en/blog/environment/add-apt-repository-for-fish-and-emacs/">Add apt repository for fish and emacs</a></h2>
          <time class="published" datetime="">June 3, 2020</time>
        </header>
      </article>
      
      <article class="mini-post">
        <section>
          

        </section>
        <header>
          <h2><a href="/en/blog/environment/several-ssh-configurations/">Several SSH configurations</a></h2>
          <time class="published" datetime="">June 3, 2020</time>
        </header>
      </article>
      
      
    </section>
  

  
    
      <section id="categories">
        <header>
          <h1><a href="/en/categories">Categories</a></h1>
        </header>
        <ul>
          
            
          
          
          <li>
            
              <a href="/en/categories/environment/">environment<span class="count">2</span></a>
            
          
          <li>
            
              <a href="/en/categories/installation/">installation<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/en/categories/repository/">repository<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/en/categories/ssh/">ssh<span class="count">1</span></a>
            
          
          <li>
            
              <a href="/en/categories/windows/">windows<span class="count">1</span></a>
            
          
          </li>
        </ul>
      </section>
    
  

  
    <section id="mini-bio">
      <header>
        <h1>About</h1>
      </header>
      <p>Wellcome to xin blog!<br><strong><a href='/about'>Click here</a></strong> for more information.</p>
      <footer>
        <a href="/en/about" class="button">Learn More</a>
      </footer>
    </section>
  
</section>

      <footer id="site-footer">
  
      <ul class="socnet-icons">
        

        <li><a href="//github.com/xinii" target="_blank" rel="noopener" title="GitHub" class="fab fa-github"></a></li>











<li><a href="//linkedin.com/in/xinii" target="_blank" rel="noopener" title="LinkedIn" class="fab fa-linkedin"></a></li>




<li><a href="//facebook.com/xintxt" target="_blank" rel="noopener" title="Facebook" class="fab fa-facebook"></a></li>






<li><a href="weixin://contacts/profile/xin099" target="_blank" rel="noopener" title="WeChat" class="fab fa-weixin"></a></li>
<li><a href="//wpa.qq.com/msgrd?v=3&amp;uin=78809709&amp;site=qq&amp;menu=yes" target="_blank" rel="noopener" title="QQ" class="fab fa-qq"></a></li>


<li><a href="//twitter.com/xintxt" target="_blank" rel="noopener" title="Twitter" class="fab fa-twitter"></a></li>

<li><a href="skype:xintxt?userinfo" target="_blank" rel="noopener" title="Skype" class="fab fa-skype"></a></li>









<li><a href="mailto:xinii@msn.com" target="_blank" title="Email" class="far fa-envelope"></a></li>

      </ul>
  
  <p class="copyright">
    
      &copy; 2020
      
        xin blog
      
    . <br>
    Theme: <a href='https://github.com/pacollins/hugo-future-imperfect-slim' target='_blank' rel='noopener'>Hugo Future Imperfect Slim</a><br>A <a href='https://html5up.net/future-imperfect' target='_blank' rel='noopener'>HTML5 UP port</a> | Powered by <a href='https://gohugo.io/' title='0.67.0' target='_blank' rel='noopener'>Hugo</a>
  </p>
</footer>
<a id="back-to-top" href="#" class="fas fa-arrow-up fa-2x"></a>

      <script src="/js/highlight.js"></script>
    <script>hljs.initHighlightingOnLoad();</script><script src="/js/bundle.min.164c76cdbf053607d8165306f07b256a57d65b48860459cb32f06ca4c0bf9e2b.js" integrity="sha256-Fkx2zb8FNgfYFlMG8HslalfWW0iGBFnLMvBspMC/nis="></script>
    <script src="/js/add-on.js"></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-169244465-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

    </div>
  </body>
</html>
